---
title: "aws login ã§ç™ºç”Ÿã—ãŸ 400 ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‹ã‚Šã¥ã‚‰ã„"
emoji: "ğŸ”"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["aws", "cli"]
published: true
---

## ã¯ã˜ã‚ã«

AWS CLI ã®æ–°ã‚³ãƒãƒ³ãƒ‰ `aws login` ãŒç™»å ´ã—ã€ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ãƒ»ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã‚’ä¿å­˜ã™ã‚‹ã“ã¨ãªãã‚»ã‚­ãƒ¥ã‚¢ã« CLI ã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ï¼ˆ`aws login` ã‚³ãƒãƒ³ãƒ‰ã¯ã€version 2.32.0 ä»¥é™ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§åˆ©ç”¨å¯èƒ½ï¼‰

è©³ã—ãã¯ã€AWS å…¬å¼ã‚„ã‚¯ãƒ©ãƒ¡ã‚½ã•ã‚“ã®ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’å‚ç…§ãã ã•ã„ã€‚ï¼ˆã„ã¤ã‚‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼‰
https://aws.amazon.com/jp/blogs/security/simplified-developer-access-to-aws-with-aws-login/
https://dev.classmethod.jp/articles/aws-cli-aws-login/

ã“ã®è¨˜äº‹ã§ã¯ã€`aws login` ã‚³ãƒãƒ³ãƒ‰ã®ãƒ–ãƒ©ã‚¦ã‚¶èªè¨¼æ™‚ã«é­é‡ã—ãŸ 400 ã‚¨ãƒ©ãƒ¼ã®å¯¾å‡¦æ–¹æ³•ã‚’å‚™å¿˜ã¨ã—ã¦è¨˜éŒ²ã—ã¾ã™ã€‚

## 400 ã‚¨ãƒ©ãƒ¼ã®å†…å®¹

![](/images/20251129-awslogin/2025-11-29-13-09-48.png)

> 400 Bad Request
> You may have typed the address incorrectly or you may have used an outdated link.
> Please clear your cookies and try the request again. If the problem persists, please contact Support. We apologize for the inconvenience.

## 400 ã‚¨ãƒ©ãƒ¼ã®å¯¾å‡¦æ–¹æ³•

ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€Œã‚¢ãƒ‰ãƒ¬ã‚¹èª¤ã‚Šã€ã‚‚ã—ãã¯ã€Œå¤ã„ãƒªãƒ³ã‚¯ã‚’ä½¿ç”¨ã€ã¨è¡¨ç¤ºã•ã‚Œã‚ã‹ã‚Šã¥ã‚‰ã„ã§ã™ãŒã€ãƒãƒªã‚·ãƒ¼ä¸è¶³ãŒåŸå› ã§ã™ã€‚
AWS å…¬å¼ãƒ–ãƒ­ã‚°ã«ã°ã£ã¡ã‚Šè¨˜è¼‰ãŒã‚ã‚‹ã¨ãŠã‚Šã€`aws login` ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ã€ç„¶ã‚‹ã¹ããƒãƒªã‚·ãƒ¼ä»˜ä¸ãŒå¿…è¦ã§ã™ã€‚

> The aws login command is controlled by two IAM actions: signin:AuthorizeOAuth2Access and signin:CreateOAuth2Token. Use the SignInLocalDevelopmentAccess managed policy or add these actions to your IAM policies to allow IAM users and IAM roles with console access to use this feature.

ä»Šå›ã¯ã€`SignInLocalDevelopmentAccess` ã®ãƒãƒãƒ¼ã‚¸ãƒ‰ãƒãƒªã‚·ãƒ¼ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã§ç„¡äº‹ã«è§£æ¶ˆã—ã¾ã—ãŸã€‚

![](/images/20251129-awslogin/2025-11-29-13-35-55.png)

`aws login` ã®ãƒ–ãƒ©ã‚¦ã‚¶èªè¨¼ã«æˆåŠŸã—ãŸè¨˜å¿µã‚¹ã‚¯ã‚·ãƒ§ãŒã“ã¡ã‚‰ã€‚
![](/images/20251129-awslogin/2025-11-29-13-40-07.png)

`sts get-caller-identity` ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œçµæœã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã“ã¡ã‚‰ã€‚

```sh
% aws sts get-caller-identity --profile test
{
    "UserId": "xxxxxxxxxxxxxxxxxx",
    "Account": "123456789012",
    "Arn": "arn:aws:iam::123456789012:user/minimal-user"
}
```

## ã•ã„ã”ã«

ç”¨é€”åˆ¥ã«é™å®šçš„ãªæ¨©é™ã‚’ä»˜ä¸ã—ãŸ IAM ãƒ¦ãƒ¼ã‚¶ã§é‹ç”¨ã—ã¦ã„ã‚‹å ´åˆã«é­é‡ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€èª°ã‹ã®å‚è€ƒã«ãªã‚Œã°å¬‰ã—ã„ã§ã™ã€‚
`aws login` ã‚³ãƒãƒ³ãƒ‰ã‚’ç©æ¥µçš„ã«æ´»ç”¨ã—ã€ãƒ­ãƒ¼ã‚«ãƒ«ç«¯æœ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ãƒ»ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã®ä¿å­˜ã‹ã‚‰ã¯å’æ¥­ã—ã¦ã„ããŸã„ã§ã™ã­ã€‚

ã§ã¯ã§ã¯ã€‚
